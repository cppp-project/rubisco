name: ðŸ“¦ Pack built-in extensions.

steps:
  - mkdir: dist

  - glob: extensions/*
    save-to: exts
    regular: false

  - matrix:
      extension: ${{ exts }}
    steps:
      - name: ðŸ“¦ Pack ${{ extension }} to RuBP.
        workflow: ${{ extension }}/.rubisco/build.yaml
        chdir: ${{ extension }}
        fail-fast: true

      - name: ðŸ“¦ Copy output files.
        copy: ${{ extension }}/dist/*.rubp
        to: dist
